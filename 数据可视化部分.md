我希望用python代码，对用户的评分结果进行可视化分析。

# 数据来源
## 题目分类数据
* 数据地址：`data/q_type.json`

### 数据字段说明

| 字段名 (Key) | 数据类型 | 说明 | 示例 |
| :--- | :--- | :--- | :--- |
| **(根)** | `Array` | 整个JSON是一个数组，每个元素代表一个**阶段 (Stage)**。 | `[ { ... }, { ... } ]` |
| `stage_name` | `String` | 阶段的名称。对应原始数据中的“阶段”列。 | `"阶段一：需求探索与画像构建"` |
| `value_chains` | `Object` | 一个对象，包含了该阶段下所有的**价值链 (Value Chain)** 分类。 | `{ "底层基础": [...], "核心引擎": [...] }` |
| **(value_chains的键)** | `String` | 价值链的具体名称，作为`value_chains`对象的键。对应原始数据中的“价值链”列。 | `"底层基础"` |
| **(value_chains的值)** | `Array` of `Integers` | 一个整数数组，包含了属于该**阶段**和该**价值链**的所有`index`值。对应原始数据中的“index”列。 | `[5, 34, 27, 66, 53, 55, 57]` |

## 用户数据
* 我从supabase数据库中，把用户的评分结果，下载到了data/文件夹下，保存成了json文件的格式

json文件格式如下：

'''json
[{"idx":0,"id":16,"created_at":"2025-09-23 03:34:27.623187+00","user_name":"alynchang","user_profile":"{\"gender\": \"不愿透露\", \"usageFrequency\": \"每天\", \"financialLearningYears\": \"无基础（0年）\"}","evaluation_data":"{\"1\": {\"Alice\": {\"cons\": [\"risk_blindness\", \"logical_errors\", \"value_misalignment\"], \"score\": 4}, \"Gemini\": {\"cons\": [\"precision_illusion\"], \"score\": 8}, \"妙想\": {\"cons\": [], \"score\": 8}, \"豆包\": {\"cons\": [\"precision_illusion\", \"factual_errors\"], \"score\": 5}, \"问财\": {\"cons\": [\"precision_illusion\", \"value_misalignment\", \"risk_blindness\"], \"score\": 5}, \"ChatGPT\": {\"cons\": [\"precision_illusion\"], \"score\": 7}, \"Deepseek\": {\"cons\": [\"precision_illusion\"], \"score\": 7}, \"蚂小财\": {\"cons\": [\"factual_errors\", \"precision_illusion\", \"logical_errors\"], \"score\": 3}}, \"2\": {\"Alice\": {\"cons\": [\"logical_errors\", \"risk_blindness\", \"precision_illusion\"], \"score\": 5}, \"Gemini\": {\"cons\": [\"precision_illusion\", \"risk_blindness\", \"logical_errors\"], \"score\": 6}, \"妙想\": {\"cons\": [], \"score\": 8}, \"豆包\": {\"cons\": [\"precision_illusion\"], \"score\": 8}, \"问财\": {\"cons\": [], \"score\": 1}, \"ChatGPT\": {\"cons\": [\"precision_illusion\"], \"score\": 6}, \"Deepseek\": {\"cons\": [\"precision_illusion\"], \"score\": 8}, \"蚂小财\": {\"cons\": [\"value_misalignment\", \"precision_illusion\"], \"score\": 6}},}]
'''

数据存储结构如下：

**总体结构**
- 数据主要存于 Supabase 的 `submissions` 表，用于汇总一位用户一次评测的完整结果。
- 评测中的“临时进度”存于 `user_progress` 表，用于边评测边保存每题每模型的评分。

**`submissions` 表**
- `id`: 行主键（数值或 UUID，具体以库表设置为准）。
- `created_at`: 创建时间戳（UTC），自动生成。
- `user_name`: 用户昵称字符串。
- `user_profile`: 用户画像对象（在数据库建议为 `json/jsonb`；你当前导出的文件里是字符串化的 JSON）。
- `evaluation_data`: 评测数据对象（数据库建议为 `json/jsonb`；导出文件里同样是字符串化的 JSON）。
- `duration_seconds`: 本次评测耗时秒数（整数）。
- `status`: 提交状态，`in-progress` 表示保存进度，`completed` 表示最终提交。

**`evaluation_data` 结构**
- 顶层键为问题 ID（字符串，如 `"1"`, `"2"`）。
- 第二层键为模型展示名（与界面显示一致，如 `"Alice"`, `"Gemini"`, `"妙想"`, `"豆包"`, `"问财"`, `"ChatGPT"`, `"Deepseek"`, `"蚂小财"`）。
- 叶子为一个对象：
  - `score`: 评分，范围 1–10，未评分时为 0（或缺失，具体以前端初始化为准）。
  - `cons`: 错误类别数组，元素为类别键：
    - `factual_errors`、`logical_errors`、`conceptual_errors`、`precision_illusion`、`risk_blindness`、`value_misalignment`

示例（与你提供的数据对应的结构化理解）：
- 问题 `"1"` 下：
  - 模型 `"Alice"`：`score: 4`，`cons: ["risk_blindness","logical_errors","value_misalignment"]`
  - 模型 `"妙想"`：`score: 8`，`cons: []`
  - …
- 问题 `"2"` 下：
  - 模型 `"问财"`：`score: 1`，`cons: []`
  - 模型 `"蚂小财"`：`score: 6`，`cons: ["value_misalignment","precision_illusion"]`
  - …

**`user_profile` 结构**
- 对象包含用户基础画像字段，例如：
  - `gender`: 性别（如 `"不愿透露"`）
  - `usageFrequency`: 使用频率（如 `"每天"`）
  - `financialLearningYears`: 金融学习年限（如 `"无基础（0年）"`）
- 数据库中建议存为 `jsonb`；你当前导出的文件显示为字符串化 JSON。

**`user_progress` 表（进行中进度）**
- `user_id`: 用户昵称（与 `user_name` 对应）。
- `question_id`: 问题 ID（与 `evaluation_data` 顶层键一致）。
- `model_id`: 模型 ID（内部标识，前端会映射到模型展示名）。
- `evaluation_data`: 单条评分对象（同上：`{ score: number, cons: string[] }`）。
- `updated_at`: 最近更新时间。

**注意事项**
- 你展示的 `evaluation_data` 和 `user_profile` 在导出文件中是“字符串化 JSON”；在数据库中更推荐使用 `json/jsonb` 类型以便查询分析。
- 问题 ID 在 JSON 中使用字符串键；做统计时需注意强转为数值或保持字符串一致性。
- 完成度判断在前端按“所有问题的所有模型评分 `score > 0`”来判断是否完成，不依赖 `cons` 是否勾选。
        

# 数据处理

* 请使用python来处理相关数据，并使用streamlit来可视化
* 存数据 python scripts/export_supabase.py --table submissions --normalize --pretty
conda activate qlib12 && python3 -m streamlit run scripts/visualize_streamlit.py --server.port 10006 --server.headless true 

# 可视化目标
## 用户情况统计
* 统计用户的性别、使用频率、金融学习年限分布，用饼图展示
  - `gender`: 性别（如 `"不愿透露"`）
  - `usageFrequency`: 使用频率（如 `"每天"`）
  - `financialLearningYears`: 金融学习年限（如 `"无基础（0年）"`）
## 模型情况统计
* 绘制不同模型的得分，形成柱状图
* 绘制不同错误的的频率，形成柱状图
